# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ ‚Ññ6: –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL + C++)

---

## üìö –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
–ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º PostgreSQL –≤ –∫–∞—á–µ—Å—Ç–≤–µ –°–£–ë–î –∏ C++ –¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–æ–π —á–∞—Å—Ç–∏. –ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –°–£–ë–î —Å —è–∑—ã–∫–æ–º –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è C++, —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ç–∏–ø—ã SQL-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –º–µ—Ç–æ–¥—ã –∑–∞—â–∏—Ç—ã –æ—Ç SQL-–∏–Ω—ä–µ–∫—Ü–∏–π.

---

## üéØ –¶–µ–ª–∏ —Ä–∞–±–æ—Ç—ã
- –ò–∑—É—á–µ–Ω–∏–µ PostgreSQL –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–ª—è—Ü–∏–æ–Ω–Ω—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–∞–∫—Ç–∏–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ë–î —Å –ø—Ä–æ–≥—Ä–∞–º–º–æ–π –Ω–∞ C++
- –ò–∑—É—á–µ–Ω–∏–µ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ SQL-–∑–∞–ø—Ä–æ—Å–æ–≤
- –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è SQL-–∏–Ω—ä–µ–∫—Ü–∏–π –∏ –º–µ—Ç–æ–¥–æ–≤ –∑–∞—â–∏—Ç—ã –æ—Ç –Ω–∏—Ö

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–°–£–ë–î**: PostgreSQL 16+
- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è**: C++17
- **–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞**: libpqxx 7.8+
- **–û–°**: Ubuntu/Debian –∏–ª–∏ –ª—é–±–∞—è Linux-—Å–∏—Å—Ç–µ–º–∞

---

## üìã –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

### 1. –°–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (Ubuntu)
```bash
# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤
sudo apt update

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ PostgreSQL –∏ —É—Ç–∏–ª–∏—Ç
sudo apt install postgresql postgresql-contrib

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è C++
sudo apt install libpqxx-dev

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä–∞ C++ (–µ—Å–ª–∏ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω)
sudo apt install g++
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ PostgreSQL
```bash
# –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è postgres
sudo -u postgres psql

# –í –∫–æ–Ω—Å–æ–ª–∏ PostgreSQL —Å–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ë–î
CREATE USER your_username WITH PASSWORD 'your_password';
CREATE DATABASE library_db OWNER your_username;
GRANT ALL PRIVILEGES ON DATABASE library_db TO your_username;
\q
```

---

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

**–¢–∞–±–ª–∏—Ü—ã**:
- authors - –∞–≤—Ç–æ—Ä—ã –∫–Ω–∏–≥
- genres - –∂–∞–Ω—Ä—ã –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä—ã
- books - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–Ω–∏–≥–∞—Ö
- readers - –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—Ç–µ–ª–∏
- borrowings - –∏—Å—Ç–æ—Ä–∏—è –≤—ã–¥–∞—á–∏ –∫–Ω–∏–≥

**–°–≤—è–∑–∏**:
- –û–¥–∏–Ω –∞–≤—Ç–æ—Ä ‚Üí –º–Ω–æ–≥–æ –∫–Ω–∏–≥ (1:N)
- –û–¥–∏–Ω –∂–∞–Ω—Ä ‚Üí –º–Ω–æ–≥–æ –∫–Ω–∏–≥ (1:N)
- –û–¥–Ω–∞ –∫–Ω–∏–≥–∞ ‚Üí –º–Ω–æ–≥–æ –≤—ã–¥–∞—á (1:N)
- –û–¥–∏–Ω —á–∏—Ç–∞—Ç–µ–ª—å ‚Üí –º–Ω–æ–≥–æ –≤—ã–¥–∞—á (1:N)

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞**:
```text
Lab6/
‚îú‚îÄ‚îÄ main.cpp              # –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ create_db.sql         # SQL-—Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è —Ç–∞–±–ª–∏—Ü
‚îú‚îÄ‚îÄ insert_data.sql       # SQL-—Å–∫—Ä–∏–ø—Ç –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚îî‚îÄ‚îÄ more_data.sql         # –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
```

---

## üöÄ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫
**1. –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
psql -U your_username -d library_db -f create_db.sql

# –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
psql -U your_username -d library_db -f insert_data.sql
```

**2. –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–æ–≥—Ä–∞–º–º—ã**
```bash
g++ -std=c++17 main.cpp -lpqxx -lpq -o library_app
```

**3. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã**
```bash
./library_app
```

---

## SQL-–∑–∞–ø—Ä–æ—Å—ã (18 —Ç–∏–ø–æ–≤):

- SELECT —Å JOIN (–≤—Å–µ –∫–Ω–∏–≥–∏ —Å –∞–≤—Ç–æ—Ä–∞–º–∏ –∏ –∂–∞–Ω—Ä–∞–º–∏)
- SELECT —Å WHERE (–ø–æ–∏—Å–∫ –ø–æ –∞–≤—Ç–æ—Ä—É)
- SELECT —Å WHERE (–ø–æ–∏—Å–∫ –ø–æ –∂–∞–Ω—Ä—É)
- SELECT —Å JOIN + WHERE (–∫–Ω–∏–≥–∏ –Ω–∞ —Ä—É–∫–∞—Ö)
- INSERT (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–Ω–∏–≥–∏)
- INSERT (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —á–∏—Ç–∞—Ç–µ–ª—è)
- UPDATE (–≤—ã–¥–∞—á–∞ –∫–Ω–∏–≥–∏)
- UPDATE (–≤–æ–∑–≤—Ä–∞—Ç –∫–Ω–∏–≥–∏)
- SELECT —Å GROUP BY + HAVING (–∞–≤—Ç–æ—Ä—ã —Å >1 –∫–Ω–∏–≥–æ–π)
- SELECT —Å –ø–æ–¥–∑–∞–ø—Ä–æ—Å–æ–º (—Å–∞–º—ã–µ —Å—Ç–∞—Ä—ã–µ –∫–Ω–∏–≥–∏)
- SELECT —Å LEFT JOIN (–≤—Å–µ –∞–≤—Ç–æ—Ä—ã)
- SELECT —Å –∞–≥—Ä–µ–≥–∞—Ç–Ω—ã–º–∏ —Ñ—É–Ω–∫—Ü–∏—è–º–∏ (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)

  13-15. –ü—Ä–æ—Å–º–æ—Ç—Ä –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π —Å ID
  16-18. –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è SQL-–∏–Ω—ä–µ–∫—Ü–∏–π
